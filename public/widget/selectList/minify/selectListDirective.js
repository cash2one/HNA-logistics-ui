!function(t,e,i,l){function s(e,i,l){this.el=t(e),this.options=t.extend({},o,i),this.init(l)}var o={maxHeight:240,minHeight:34,offset:4,startLoadCount:10,id:"",name:"",value:"",isBlur:!0,getFirst:!1,getName:void 0,getId:void 0};s.prototype={init:function(e){var l,s,o,a,n=this;n.el.addClass("select-list"),""==n.el.val()&&(e=e.slice(0,n.options.startLoadCount),e.length||(o.empty(),o.hide())),n.getListData(e),o=n.el.next(),n.el.on("focus",function(){o.empty(),o.hide()}),1==n.options.isBlur&&n.el.parents().on("click",function(i){if(!t(i.target).hasClass("select-list")){if(o.hide(),n.el.val())return!1;if(e.length)return n.options.getName(e[0][n.options.name]),n.options.getId(e[0][n.options.id]),!1}return!1}),o.on("click","li",function(){return s=t(this).data("id"),l=t(this).text(),s?(n.options.getName(l),n.options.getId(s)):n.el.val(""),n.getListData(null),t(".lpp-select-list").hide(),!1});var r=-1;t(i).on("keydown",function(d){a=t("."+n.el.attr("id")).find("li");var p=d,c=p.keyCode;if(""!=t(p.target)[0].id)if(c>=65&&c<=90||c>=48&&c<=57||c>=96&&c<=111||c>=186&&c<=222||8==c||46==c||32==c)n.getListData(e),-1!=r&&(r=-1);else if(38==c||40==c)40==c&&(r++,-1!=r&&a.eq(r).removeClass("active"),r==a.length&&(r=0)),38==c&&(-1!=r?(a.eq(r).removeClass("active"),r--):r=a.length-1,-1==r&&(r=a.length-1)),a.removeClass("active"),a.eq(r).addClass("active"),l=a.eq(r).text(),1==n.options.getFirst?t(p.target).val(l.split("ï¼Œ")[0]):t(p.target).val(l),o.scrollTop(34*r),34*r>o.height()?o.scrollTop(34*r):o.scrollTop(0);else if(13==c){if(-1!=r){if(a.eq(r).text())return l=a.eq(r).text(),s=a.eq(r).data("id"),n.options.getName(l),n.options.getId(s),r=-1,n.getListData(null),t(".lpp-select-list").hide(),!1}else{if(l=n.el.val(),0!=e.length)return n.options.getName(e[0][n.options.name]),n.options.getId(e[0][n.options.id]),n.getListData(null),t(".lpp-select-list").hide(),!1;n.el.val(Lang.getValByKey("widget/selectList","selectList_list_tip"))}t(i).unbind("keydown"),n.el.get(0).blur()}})},getListData:function(i){var l=this,s='<ul class="select-list-box lpp-select-list '+l.el.attr("id")+'"></ul>';t(".lpp-select-list").hide().empty(),l.el.next().hasClass("lpp-select-list")&&l.el.next().remove(),l.el.after(s);var o="";if(i)if(i.length>0)for(var a in i)o+=0==a?'<li class="active" data-id="'+i[a][l.options.id]+'">'+i[a][l.options.name]+"</li>":'<li data-id="'+i[a][l.options.id]+'">'+i[a][l.options.name]+"</li>";else o='<li style="color: red;">'+Lang.getValByKey("widget/selectList","selectList_list_tip")+"</li>";t("."+l.el.attr("id"))[0]&&(t("."+l.el.attr("id"))[0].innerHTML=o),t("."+l.el.attr("id")).css({"min-height":l.options.minHeight,"max-height":l.options.maxHeight}),l.el.next().hasClass("lpp-select-list")&&l.el.next().hide(),t("."+l.el.attr("id")).show(),t("."+l.el.attr("id")).on("mouseenter","li",function(){t("."+l.el.attr("id")).find("li").removeClass("active"),t(this).addClass("active")}).on("mouseleave","li",function(){t(this).removeClass("active")});var n=l.el.offset(),r=n.left,d=n.top,p=t(e).scrollTop()+t(e).height();d+l.el.outerHeight()+l.el.outerHeight()-p<-l.options.offset?t("."+l.el.attr("id")).offset({left:r,top:d+l.el.height()}):t("."+l.el.attr("id")).offset({left:r,top:d-t("."+l.el.attr("id")).outerHeight()})}},t.fn.selectList=function(e,i){var l=this,o=this,a=t(this).data("selectList");return t(this).data("selectList",new s(this,e,i)),l.each(function(){a&&"string"==typeof e&&"function"==typeof a[e]&&(o=a[e]())}),l||o}}(jQuery,window,document);