!function(e,i){!function(e){function i(i,t,h,s){var r=this;r.$elm=e(i),r.data=t,r.param=e.extend({},c,s),r.opts=e.extend({},n,h),r.init()}var n={},c={key:"",checkedFlag:!1};i.prototype={init:function(){var e=this,i="",i=e.render(e.data);e.$elm.html(i),e.handle()},render:function(e){for(var i=this,n="",c=e.length,t=0;t<c;t++)n+='<li class="tree-li" data-id="'+e[t].id+'" data-name="'+e[t].name+'" data-parentid="'+e[t].parentId+'">',e[t].selected?n+='<i class="cursor-pointer icon-Uncheck icon-Check"></i>':n+='<i class="cursor-pointer icon-Uncheck"></i>',e[t].children&&e[t].children.length?n+='<i class="cursor-pointer icon-Open"></i>':n+='<i class="cursor-pointer icon-leafs"></i>',n+='<p><span class="htree-text">'+e[t].name+"</span></p>",e[t].children&&e[t].children.length&&(n+='<ul class="htree-children">',n+=i.render(e[t].children),n+="</ul>"),n+="</li>";return n},handle:function(){var i=this;i.$elm.on("click",".icon-Open",function(i){e(this).parent("li.tree-li").children("ul.htree-children").slideDown(),e(this).addClass("icon-Close").removeClass("icon-Open")}),i.$elm.on("click",".icon-Close",function(i){e(this).parent("li.tree-li").children("ul.htree-children").slideUp(),e(this).addClass("icon-Open").removeClass("icon-Close")}),i.$elm.on("click",".icon-Uncheck",function(n){e(this).hasClass("icon-Check")?(e(this).removeClass("icon-Check"),e(this).parent("li.tree-li").find(".icon-Uncheck").each(function(){e(this).removeClass("icon-Check")})):e(this).hasClass("icon-inoperable")?(e(this).removeClass("icon-inoperable"),e(this).parent("li.tree-li").find(".icon-Uncheck").each(function(){e(this).removeClass("icon-Check")})):(e(this).addClass("icon-Check"),e(this).parent("li.tree-li").find(".icon-Uncheck").each(function(){e(this).addClass("icon-Check")})),i.upcheked()})},setParam:function(i){this.param=e.extend({},c,i)},getLeafsChecked:function(){var i=this,n=[];return i.$elm.find(".icon-leafs").each(function(){if(e(this).prev(".icon-Uncheck").hasClass("icon-Check")){var i=e(this).parent(".tree-li").attr("data-id");n.push(i)}}),n},expendAll:function(){var i=this;i.$elm.find("ul").each(function(){e(this).slideDown()}),i.$elm.find(".icon-Open").each(function(){e(this).removeClass("icon-Open").addClass("icon-Close")})},shrinkAll:function(){var i=this;i.$elm.find("ul").each(function(){e(this).slideUp()}),i.$elm.find(".icon-Close").each(function(){e(this).removeClass("icon-Close").addClass("icon-Open")})},showChecked:function(i){var n=this;e.trim(n.param.key)&&e.trim(n.param.key.toLowerCase());i=void 0==i?n.$elm:i,i.show(),i.children("li.tree-li").each(function(){e(this).hasClass("tree-li-hide")||(e(this).find(".icon-Check").length?e(this).children("ul.htree-children").length&&n.showChecked(e(this).children("ul.htree-children")):e(this).addClass("tree-li-hide"))}),n.$elm.find(".icon-Open").each(function(){e(this).removeClass("icon-Open").addClass("icon-Close")})},refresh:function(){var e=this,i=e.render(e.data);e.$elm.html(i),e.upcheked()},upcheked:function(i){var n=this;i=void 0==i?n.$elm:i,i.children("li.tree-li").each(function(){var i=0,c=e(this).find(".icon-leafs").length;e(this).find(".icon-leafs").each(function(){e(this).prev(".icon-Uncheck").hasClass("icon-Check")&&++i}),i==c?e(this).children(".icon-Uncheck").removeClass("icon-inoperable").addClass("icon-Check"):i?e(this).children(".icon-Uncheck").removeClass("icon-Check").addClass("icon-inoperable"):e(this).children(".icon-Uncheck").removeClass("icon-inoperable").removeClass("icon-Check"),e(this).children("ul.htree-children")&&n.upcheked(e(this).children("ul.htree-children"))})},search:function(i){var n=this,c=e.trim(n.param.key)?e.trim(n.param.key.toLowerCase()):"";i=void 0==i?n.$elm:i,i.children("li.tree-li").each(function(){var i=e(this).children("p").children(".htree-text").html();i&&-1!=i.toLowerCase().indexOf(c)?e(this).parents(".htree-children").each(function(){e(this).show(),e(this).parents(".tree-li").removeClass("tree-li-hide"),e(this).parents(".tree-li").children(".icon-Open").each(function(){e(this).addClass("icon-Close").removeClass("icon-Open")})}):(e(this).addClass("tree-li-hide"),e(this).children("ul.htree-children").length&&n.search(e(this).children("ul.htree-children")))})},filterTree:function(i){var n=this;i=void 0==i?n.$elm:i,i.children("li.tree-li").each(function(){if(e(this).children("ul.htree-children").length)n.filterTree(e(this).children("ul.htree-children"));else{var i=!0;e(this).parent("ul").children("li.tree-li").each(function(){e(this).hasClass("tree-li-hide")||(i=!1)}),i&&e(this).parent("ul").parent("li.tree-li").addClass("tree-li-hide")}})},treeParam:function(){var i=this;i.refresh();var n=e.trim(i.param.key)?e.trim(i.param.key.toLowerCase()):"",c=!!i.param.checkedFlag&&i.param.checkedFlag;n&&i.search(),c&&i.showChecked(),i.filterTree()}},e.fn.htree=function(e,n,c){return new i(this,e,n,c)}}(e.jQuery)}(window);