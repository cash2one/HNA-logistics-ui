function setAjaxHeader(){var e=cookie.get("token");e&&$.ajaxSetup({headers:{"x-token":e}})}function loadBar(e){e.removeClass("active"),e.next().hide(),e.next("ul").eq(0).is(":visible")||(e.next("ul").eq(0).show(),e.eq(0).addClass("active")),e.eq(0).next(".switch-list").css("height",400-40*e.length),setTimeout(function(){e.eq(0).next(".switch-list").scrollTop(0)},0)}function barClick(e){e.on("click",function(){return e.removeClass("active"),$(this).next().is(":visible")?($(this).next().hide(),$(this).removeClass("active"),!1):(e.next().hide(),$(this).next().show(),$(this).addClass("active"),setTimeout(function(){e.eq(0).next(".switch-list").scrollTop(0)},0),!1)})}function showErrorModel(e){var t=$(".errors");t.each(function(a){if(t.eq(a).parents("li").find("input").hasClass("ng-invalid"))return e.find(".label-text").removeClass("active"),e.next(".isContainer").hide(),t.eq(a).parents(".isContainer").prev(".label-text").addClass("active"),t.eq(a).parents(".isContainer").show(),!1})}function startScroll(e,t){t.scrollTop(e.offset().top-t.offset().top+t.scrollTop()-10)}function scrollToErrorView(e){setTimeout(function(){for(var t=$("[type=text]",e),a=$("textArea",e),n=($.merge(t,a),0);n<t.length;n++)if("rgb(250, 120, 126)"==$(t[n]).css("border-bottom-color")){startScroll($(t[n]),e);break}},300)}function getBeforeDate(e){var e=e,t=new Date,a=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();return s<=e&&(n>1?n-=1:(a-=1,n=12)),t.setDate(t.getDate()-e),a=t.getFullYear(),n=t.getMonth()+1,s=t.getDate(),a+"-"+(n<10?"0"+n:n)+"-"+(s<10?"0"+s:s)}function getYearWeek(e){var t=e,a=new Date(t.substring(0,4),parseInt(t.substring(5,7))-1,t.substring(8,10)),n=new Date(t.substring(0,4),0,1),s=n.getDay()-1;s<0&&(s=6),s<4?n.setDate(n.getDate()-s):n.setDate(n.getDate()+7-s);var r=Math.round((a.valueOf()-n.valueOf())/864e5);if(r<0){return getYearWeek(a.getFullYear()-1+"-12-31")}return a.getFullYear()+"年第"+Math.ceil((r+1)/7)+"周"}setAjaxHeader(),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},$.extend({dropdown:function(e,t){$(document).delegate(".page-size","click",function(e){$(this).toggleClass("open"),e.stopPropagation()}),$(document).on("click",function(){$(".page-size").removeClass("open")})}}),$.dropdown();var reSetMenuCssStatus=function(e){var t=top.$(".treeview-menu").find("a");t.removeClass("selected");for(var a=0,n=t.length;a<n;a++)$(t[a]).attr("data-hash")==e&&$(t[a]).addClass("selected")};$.event.special.valuechange={teardown:function(e){$(this).unbind(".valuechange")},handler:function(e){$.event.special.valuechange.triggerChanged($(this))},add:function(e){$(this).on("keyup.valuechange cut.valuechange paste.valuechange input.valuechange",e.selector,$.event.special.valuechange.handler)},triggerChanged:function(e){var t="true"===e[0].contentEditable?e.html():e.val();t!==(void 0===e.data("previous")?e[0].defaultValue:e.data("previous"))&&(e.trigger("valuechange",[e.data("previous")]),e.data("previous",t))}},window.Template={build:function(e,t,a,n){e.getTemplate({urlParams:{async:!0,type:t}},function(s){var r=s.data;e.getTemplateData({urlParams:{async:!0,type:t},seatParams:{orderNo:a}},function(s){top.htmlToPic(template,s,r,t,a,e,n)})})},uploadTemplate:function(e,t,a,n,s){e.uploadTemplate({urlParams:{image:t,type:a,orderNo:n,async:!0},seatParams:{type:a,orderNo:n}},function(e){s(e)})}};