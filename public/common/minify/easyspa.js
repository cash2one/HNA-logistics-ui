!function(){function e(e,a){$.globalEval(a)}function a(e,a){var s=n(),t=hex_md5(e);if(0==$("#"+t).length){var i=document.createElement("style");i.id=t,i.innerHTML=a,s.append(i)}}function s(e){return function(a){e.indexOf("widget/")>-1?a(null,""):a(null,easySpa.relateJs[e])}}function t(){var e=$("#css-box"),a=$("body");return 0==e.length&&(e=$("<div id='css-box'></div>"),a.prepend(e)),e}function n(){var e=$("#common-css-box"),a=$("body");return 0==e.length&&(e=$("<div id='common-css-box'></div>"),a.prepend(e)),e}function r(s){return function(t){var n=s.split("/")[2];s.indexOf(".lang")>-1?$.ajax({url:s,type:"get",dataType:"html",cache:easySpa.isAjaxCache,success:function(e){"object"==typeof Lang&&(Lang.dataPool["widget/"+n]||(Lang.dataPool["widget/"+n]=JSON.parse(e))),t(null,"")}}):s.indexOf(".js")>-1?$.ajax({url:s,type:"get",dataType:"html",cache:easySpa.isAjaxCache,success:function(a){e(s,a),t(null,"")}}):s.indexOf(".css")>-1&&$.ajax({url:s,type:"get",dataType:"html",cache:easySpa.isAjaxCache,success:function(e){a(s,e),t(null,"")}})}}function p(e,a){if(C[e])return void a(null,"");var s,t,i=($("head")[0],n(),e.split("/")[1]),p=[];if(easySpa.config.isDebug?(s=easySpa.config.paths.widget+"/"+i+"/"+i+".css",t=easySpa.config.paths.widget+"/"+i+"/"+i+"Directive.js",p.push(s),p.push(t)):(s=easySpa.config.paths.widget+"/"+i+"/"+O+"/"+i+".css",t=easySpa.config.paths.widget+"/"+i+"/"+O+"/"+i+"Directive.js",p.push(s),p.push(t)),"object"==typeof Lang){var o=Lang.getCurrentLanguage(),c=easySpa.config.paths.widget+"/"+i+"/"+o+".lang";p.push(c)}for(var l={},f=0;f<p.length;f++)l[p[f]]=r(p[f]);easySpa.async.parallel(l,function(s,t){C[e]=!0,a(null,"")})}function o(e){if(!C[e]){var a,s,t=$("head")[0],i=n(),r=e.split("/")[1];if(easySpa.config.isDebug?(a=easySpa.config.paths.widget+"/"+r+"/"+r+".css",s=easySpa.config.paths.widget+"/"+r+"/"+r+"Directive.js"):(a=easySpa.config.paths.widget+"/"+r+"/"+O+"/"+r+".css",s=easySpa.config.paths.widget+"/"+r+"/"+O+"/"+r+"Directive.js"),"object"==typeof Lang){var p=Lang.getCurrentLanguage(),o=easySpa.config.paths.widget+"/"+r+"/"+p+".lang";if(!Lang.dataPool["widget/"+r]){var c=easySpa.getRemoteText(o);Lang.dataPool["widget/"+r]=JSON.parse(c)}}var l=easySpa.getRemoteText(a),f=easySpa.getRemoteText(s),u=hex_md5(a),d=hex_md5(s),h=document.createElement("style");h.id=u,h.innerHTML=l,i.append(h);var g=document.createElement("script");g.id=d,g.innerHTML=f,t.appendChild(g),C[e]=!0}}function c(e){var a,s=$("head")[0],t=e.split("/")[1];a=easySpa.config.isDebug?easySpa.config.paths.service+"/"+t+".js":easySpa.config.paths.service+"/"+O+"/"+t+".js";var n=easySpa.getRemoteText(a),i=hex_md5(a),r=document.createElement("script");r.id=i,r.innerHTML=n,s.appendChild(r)}function l(e,a,s){if(easySpa.isUseCombine){for(var i=[],a=0;a<e.length;a++)-1==e[a].indexOf("widget")&&-1==e[a].indexOf("service")?i.push(e[a]):-1!=e[a].indexOf("widget")?(i.push(easySpa.config.paths.widget+"/"+e[a].split("/")[1]+"/"+e[a].split("/")[1]+".css"),i.push(easySpa.config.paths.widget+"/"+e[a].split("/")[1]+"/"+e[a].split("/")[1]+"Directive.js")):i.push(easySpa.config.paths.service+"/"+e[a].split("/")[1]+".js");if(i.length>0){var r=$.ajax({url:easySpa.combineLoadUrl,type:"get",dataType:"html",data:{urls:i.join(",")},async:!1,cache:easySpa.isAjaxCache}).responseText;if(!$.trim(r))return;for(var p=r.split(easySpa.responseTextMark),a=0;a<p.length;a++){var f=hex_md5(i[a]);if(!($("#"+f).length>0))if(i[a].indexOf("widget")>-1){var u=$("head")[0],d=n();if(i[a].indexOf(".js")>-1){if("object"==typeof Lang){var h=Lang.getCurrentLanguage(),g=i[a].split("/")[2],y=easySpa.config.paths.widget+"/"+g+"/"+h+".lang";if(!Lang.dataPool["widget/"+g]){var S=easySpa.getRemoteText(y);Lang.dataPool["widget/"+g]=JSON.parse(S)}}var v=document.createElement("script");v.id=f,v.innerHTML=p[a],$("head")[0].appendChild(v)}else if(i[a].indexOf(".css")>-1){var x=document.createElement("style");x.id=f,x.innerHTML=p[a],d.append(x)}}else{var v=document.createElement("script");v.id=f,v.innerHTML=p[a],$("head")[0].appendChild(v)}}}}else{if(a==e.length){if(s)return s();return}if(e[a].indexOf(".css")>-1){var d=t(),x=document.createElement("style");x.id=hex_md5(e[a]);var j;if(0==$("#"+x.id).length)return j=$.ajax({url:e[a],type:"GET",dataType:"html",async:!1,cache:easySpa.isAjaxCache}).responseText,x.innerHTML=j,d.append(x),a++,l(e,a,s)}var m=hex_md5(e[a]);if($("#"+m).length>0)return a++,l(e,a,s);if(-1==e[a].indexOf("widget")&&-1==e[a].indexOf("service")){var u=$("head")[0],v=document.createElement("script");v.id=m;var T=$.ajax({url:e[a],type:"get",dataType:"html",async:!1,cache:easySpa.isAjaxCache}).responseText;v.innerHTML=T,u.appendChild(v)}else-1!=e[a].indexOf("widget")?o(e[a]):c(e[a]);a++,l(e,a,s)}}function f(e){return function(a){$.ajax({url:e,type:"get",dataType:"html",cache:easySpa.isAjaxCache,success:function(e){a(null,e)}})}}function u(e){var a=e.indexOf("easySpa.require(["),s=e.indexOf("]",a),t=[];if(a>-1)for(var n=e.substring(a+"easySpa.require([".length,s).split(","),i=0;i<n.length;i++)n[i].indexOf("'")>-1?t.push($.trim(n[i].replaceAll("'",""))):t.push($.trim(n[i].replaceAll('"',"")));return t}function d(e){return function(a){if(e.indexOf("widget/")>-1)p(e,a);else{if(e.indexOf("service/")>-1){var s=e.split("/")[1];e=easySpa.config.isDebug?easySpa.config.paths.service+"/"+s+".js":easySpa.config.paths.service+"/"+O+"/"+s+".js"}else if(e.indexOf("common/")>-1){var t=e.substring(0,e.lastIndexOf("/")),n=e.substring(e.lastIndexOf("/"),e.length);easySpa.config.isDebug||(e=t+"/"+O+n)}else if(e.indexOf("fragment/")>-1){var t=e.substring(0,e.lastIndexOf("/")),n=e.substring(e.lastIndexOf("/"),e.length);easySpa.config.isDebug||(e=t+"/"+O+n)}else e.indexOf("javascripts/")>-1&&(easySpa.config.isDebug||(e=e.replaceAll("20161224",O)));$.ajax({url:e,type:"get",dataType:"html",cache:easySpa.isAjaxCache,success:function(e){a(null,e)}})}}}function h(e,a){var s=!0;for(var t in e){var n=e[t].nextNode;if(!e[t].isLeaf)for(var i=0;i<n.length;i++)e[n[i]]||(s=!1)}s&&T(a)}function g(e,a,s,t){var n=u(a);if(t&&0==n.length)return void T(s);for(var i={},r=0;r<n.length;r++)i[n[r]]=d(n[r]);easySpa.async.parallel(i,function(a,t){var n=easySpa.jsTree[e];for(var i in t)if(easySpa.relateJs[i]=t[i],-1==n.nextNode.indexOf(i)&&n.nextNode.push(i),easySpa.jsTree[i]={prevNode:n,nextNode:[]},t[i]){var r=u(t[i]);r.length>0?(easySpa.requireCount++,easySpa.jsTree[i].nextNode=r,easySpa.jsTree[i].isLeaf=!1):easySpa.jsTree[i].isLeaf=!0,g(i,t[i],s,!1)}else easySpa.jsTree[i].isLeaf=!0;h(easySpa.jsTree,s)})}function y(s,t,n){var i=0;easySpa.delayTime=s;for(var r={},n=0;n<t.length;n++)r[t[n]]=f(t[n]);easySpa.async.parallel(r,function(n,r){function p(){s.resolve()}for(jsPath in r)if(jsPath.indexOf(".js")>-1)if(jsPath.indexOf("Controller")>-1){easySpa.jsTree[jsPath]={nextNode:[],preNode:null,isLeaf:!1};T=function(a){i++,e(a,r[a]),i==t.length&&-1==r[a].indexOf("easySpa.require([")&&p()},g(jsPath,r[jsPath],jsPath,!0)}else i++,e(jsPath,r[jsPath]),i==t.length&&p();else jsPath.indexOf(".css")>-1&&(i++,a(jsPath,r[jsPath]),i==t.length&&p())})}function S(e,a){return easySpa.config.isDebug?[easySpa.config.paths.pageCss+"/"+e+"/"+a+"/"+e+".css",easySpa.config.paths.pageJs+"/"+e+"/"+a+"/"+e+"Service.js",easySpa.config.paths.pageJs+"/"+e+"/"+a+"/"+e+"Controller.js",easySpa.config.paths.pageJs+"/"+e+"/"+a+"/"+e+"View.js"]:[easySpa.config.paths.pageCss+"/"+e+"/"+O+"/"+e+".css",easySpa.config.paths.pageJs+"/"+e+"/"+O+"/"+e+"Service.js",easySpa.config.paths.pageJs+"/"+e+"/"+O+"/"+e+"Controller.js",easySpa.config.paths.pageJs+"/"+e+"/"+O+"/"+e+"View.js"]}function v(){var e=this;this.AssetsPath=[],this.resolve={delay:function(a){if(!easySpa.isReloadPage){var s=a.defer();return y(s,e.AssetsPath,0),s.promise}}},this.setAssets=function(e,a){return this.AssetsPath=S(e,a),this.resolve}}var x,j=[],m=setInterval,T=null,b={},C={},O="minify",w=$.ajax;$.ajax=function(e){e.url.indexOf("?")>-1?e.url=e.url+"&timestamp="+cacheTime:e.url=e.url+"?timestamp="+cacheTime,e.cache=isUseCache;var a=e.success;e.error;if(a)e.success=function(e){e=easySpa.httpResponseInterceptor(e),a(e)},w.call(this,e);else if(0==e.async)return w.call(this,e)},easySpa={isReloadPage:!1,isUseCombine:!1,isAjaxCache:isUseCache,isRouteFastReload:!1},easySpa.delayTime=null,easySpa.relateJs={},easySpa.jsTree={},easySpa.callbackPool=[],easySpa.requireCount=1,easySpa.jsCount=0,easySpa.combineLoadUrl="loadAssets.php",easySpa.responseTextMark="/*^~~^*/",easySpa.eventLoop={},easySpa.config={paths:{widget:"public/widget",pageCss:"public/stylesheets",pageJs:"public/javascripts",service:"public/javascripts/service"},isDebug:!isUseCache,relyJsPath:{}},easySpa.delQueStr=function(e,a){var s="";if(-1==e.indexOf("?"))return e;s=e.substr(e.indexOf("?")+1);var t="",n="";if(-1!=s.indexOf("&")){t=s.split("&");for(i in t)t[i].split("=")[0]!=a&&(n=n+t[i].split("=")[0]+"="+t[i].split("=")[1]+"&");return e.substr(0,e.indexOf("?"))+"?"+n.substr(0,n.length-1)}return t=s.split("="),t[0]==a?e.substr(0,e.indexOf("?")):e},easySpa.queryUrlValByKey=function(e){var a=window.location.href;if(-1!=a.indexOf("?")){var s=a.split("?")[1];s=s.split("&");for(var t=0;t<s.length;t++){if(s[t].split("=")[0]==e)return decodeURIComponent(s[t].split("=")[1])}return""}},easySpa.async={done:function(e,a,s,t){return function(n,i){var r=0;s[e]=i;for(var p in s)++r==t&&a(null,s)}},parallel:function(e,a){var s={},t=0;for(var n in e)t++;for(var n in e)e[n](this.done(n,a,s,t))}},easySpa.httpResponseInterceptor=function(e){x||(x=$.ajax({url:"public/common/exceptionConfig.json",type:"GET",async:!1,cache:easySpa.isAjaxCache}).responseText,x=JSON.parse(x));for(var a in x)if(e[a])for(var s in x[a])if(s==e[a]){var t=x[a][s];-1==window.location.href.indexOf("login.html")&&"401"==s?top.location.href="http://"+location.host+"/login.html#/login?errorCode=401":"401"!=s&&(top.location.href=t);break}return e},easySpa.clearEventLoop=function(){easySpa.eventLoop={}},easySpa.clearTimer=function(){for(var e=0;e<j.length;e++)clearInterval(j[e]),j[e]=null;j=[]},easySpa.clearCssTpl=function(){$("#css-box").html("")},easySpa.getController=function(){return new v},easySpa.require=function(a,t){var n={},i=!1;easySpa.callbackPool.push(t);for(var r=0;r<a.length;r++)b[a[r]]||(n[a[r]]=s(a[r]),b[a[r]]=!0,i=!0);if(i)easySpa.async.parallel(n,function(a,s){if(++easySpa.jsCount==easySpa.requireCount){for(var t=0;t<easySpa.callbackPool.length;t++)easySpa.callbackPool[t]();easySpa.delayTime.resolve()}for(jsPath in s)s[jsPath]&&e(jsPath,s[jsPath])});else if(++easySpa.jsCount==easySpa.requireCount){for(var r=0;r<easySpa.callbackPool.length;r++)easySpa.callbackPool[r]();easySpa.delayTime.resolve()}},easySpa.use=function(e,a){l(e,0,a)},easySpa.getRemoteText=function(e){return $.ajax({url:e,type:"get",dataType:"html",cache:easySpa.isAjaxCache,async:!1}).responseText},easySpa.loadCombinAssets=function(e){return easySpa.getRemoteText(e)},easySpa.insertJsToPage=function(e){for(var a=e.split(easySpa.responseTextMark),s=0;s<a.length;s++){var t=document.createElement("script");t.innerHTML=a[s],$("head")[0].appendChild(t)}},window.setInterval=function(e,a){var s=m(e,a);return j.push(s),s}}();