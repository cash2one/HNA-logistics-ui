var Calander;easySpa.require(["widget/calander"],function(){Calander={config:null,inputPool:"",beginTime:"",finishTime:"",classPool:[],resetCalanderLayout:function(){var i=this.getCurrentInputEle();if(i&&i.length>0){$(".ui-datepicker").offset({left:i.offset().left})}},getCurrentInputEle:function(){for(var i=0;i<this.classPool.length;i++)if($(".ui-datepicker").hasClass(this.classPool[i]))return $(this.inputPool[i]);return null},clearOtherClass:function(i){for(var e=0;e<this.classPool.length;e++)i!=this.classPool[e]&&$(".ui-datepicker").removeClass(this.classPool[e])},build:function(){var i=this;"string"!=typeof i.inputPool?($(i.inputPool[0]).datetimepicker({timeFormat:this.config.showTime?"HH:mm:ss":"",dateFormat:"yy-mm-dd",showSecond:this.config.showSecond,showMinute:this.config.showMinute,showHour:this.config.showHour,showTime:this.config.showTime,changeYear:!0,changeMonth:!0,showOtherMonths:!0,beforeShow:function(){i.beginTime=$(i.inputPool[0]).val(),$.trim($(i.inputPool[1]).val())?($(i.inputPool[0]).datetimepicker("option","maxDate",$(i.inputPool[1]).val()),$(i.inputPool[0]).val(i.beginTime)):($(i.inputPool[0]).datetimepicker("option","maxDate",""),$(i.inputPool[0]).val(i.beginTime)),$(".ui-datepicker").css("visibility","visible"),$(".ui-datepicker").removeClass("canlander2"),$(".ui-datepicker").addClass("canlander"),i.clearOtherClass(i.classPool[0]),$(".ui-datepicker").addClass(i.classPool[0])},onChangeMonthYear:function(){if(i.config.difference&&$(i.inputPool[0]).val()==$(i.inputPool[1]).val()){var e=new Date($(i.inputPool[1]).val()).getTime()-(i.config.difference||0);$(i.inputPool[0]).datetimepicker("setDate",new Date(e).format("yyyy-MM-dd hh:mm:ss")),$(i.inputPool[0]).datetimepicker("refresh"),i.beginTime=$(i.inputPool[0]).val()}else i.beginTime=$(i.inputPool[0]).val()},onSelect:function(e){var t=new Date(e).getTime(),o=new Date($(i.inputPool[1]).val()).getTime()-(i.config.difference||0);o<t&&$.trim($(i.inputPool[1]).val())?($(i.inputPool[0]).val(new Date(o).format("yyyy-MM-dd hh:mm:ss")),$(i.inputPool[0]).datetimepicker("setDate",new Date(o).format("yyyy-MM-dd hh:mm:ss")),$(i.inputPool[0]).datetimepicker("refresh"),i.beginTime=$(i.inputPool[0]).val()):i.beginTime=e},onClose:function(){i.config.isClear||($(i.inputPool[0]).datetimepicker("setDate",i.beginTime),$(i.inputPool[0]).val(i.beginTime))}}),$(i.inputPool[1]).datetimepicker({timeFormat:this.config.showTime?"HH:mm:ss":"",dateFormat:"yy-mm-dd",showSecond:this.config.showSecond,showMinute:this.config.showMinute,showHour:this.config.showHour,showTime:this.config.showTime,changeYear:!0,changeMonth:!0,beforeShow:function(){i.finishTime=$(i.inputPool[1]).val(),$(i.inputPool[1]).datetimepicker("option","defaultDate",i.finishTime),$(i.inputPool[1]).datetimepicker("setDate",i.finishTime),$.trim($(i.inputPool[0]).val())?$(i.inputPool[1]).datetimepicker("option","minDate",$(i.inputPool[0]).val()):$(i.inputPool[1]).datetimepicker("option","minDate",""),$(".ui-datepicker").css("visibility","visible"),$(".ui-datepicker").removeClass("canlander2"),$(".ui-datepicker").addClass("canlander"),i.clearOtherClass(i.classPool[1]),$(".ui-datepicker").addClass(i.classPool[1])},onSelect:function(e){var t=new Date($(i.inputPool[0]).val()).getTime()+(i.config.difference||0);new Date(e).getTime()<t&&$.trim($(i.inputPool[0]).val())?($(i.inputPool[1]).val(new Date(t).format("yyyy-MM-dd hh:mm:ss")),$(i.inputPool[1]).datetimepicker("setDate",new Date(t).format("yyyy-MM-dd hh:mm:ss")),$(i.inputPool[1]).datetimepicker("refresh"),i.finishTime=$(i.inputPool[1]).val()):i.finishTime=e},onChangeMonthYear:function(){if(i.config.difference&&$(i.inputPool[0]).val()==$(i.inputPool[1]).val()){var e=new Date($(i.inputPool[0]).val()).getTime()+(i.config.difference||0);$(i.inputPool[1]).datetimepicker("setDate",new Date(e).format("yyyy-MM-dd hh:mm:ss")),$(i.inputPool[1]).datetimepicker("refresh"),i.finishTime=$(i.inputPool[1]).val()}else i.finishTime=$(i.inputPool[1]).val()},onClose:function(){i.config.isClear||($(i.inputPool[1]).datetimepicker("setDate",i.finishTime),$(i.inputPool[1]).val(i.finishTime))}})):$(i.inputPool).datetimepicker({timeFormat:this.config.showTime?"HH:mm:ss":"",dateFormat:"yy-mm-dd",showSecond:this.config.showSecond,showMinute:this.config.showMinute,showHour:this.config.showHour,showTime:this.config.showTime,changeYear:!0,changeMonth:!0,showOtherMonths:!0,beforeShow:function(){$(".ui-datepicker").css("visibility","visible"),$(".ui-datepicker").removeClass("canlander2"),$(".ui-datepicker").addClass("canlander"),i.clearOtherClass(i.classPool[0]),$(".ui-datepicker").addClass(i.classPool[0])}})},bindEvent:function(){var i=this;$(window).resize(function(){var e=i.getCurrentInputEle();if(e&&e.length>0){$(".ui-datepicker").offset({left:e.offset().left})}})},initData:function(){this.inputPool=this.config.ele,"string"==typeof this.inputPool?this.classPool=this.inputPool.substring(1,this.inputPool.length)+"-canlander":(this.classPool.push(this.inputPool[0].substring(1,this.inputPool[0].length)+"-canlander"),this.classPool.push(this.inputPool[1].substring(1,this.inputPool[1].length)+"-canlander"))},resetData:function(){this.config=null,this.inputPool="",this.beginTime="",this.finishTime="",this.classPool=[]},init:function(i){void 0===i.showHour&&(i.showHour=!0),void 0===i.showMinute&&(i.showMinute=!0),void 0===i.showSecond&&(i.showSecond=!0),void 0===i.showTime&&(i.showTime=!0),this.resetData(),this.config=i,this.initData(),this.build(),this.bindEvent(),Calander=$.extend(!0,{},Calander)}}});