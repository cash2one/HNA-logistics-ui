easySpa.require(["widget/tab","widget/select","widget/slimscroll","public/common/tableController.js","widget/prompt"],function(){app.controller("areaCtrl",["$scope","$compile","areaService","areaView","tableService",function(a,e,t,n,l){function r(a,e){for(var e=e.data,t=0;t<e.length;t++)if(e[t].name==a)return e[t]}function d(a){var e=a.next;if(null!=e)return e.clearData(),e.id=null,d(e)}function i(){$(".table-container tbody").slimScroll({height:$(".content-main").height()-250})}function o(){var e={urlParams:a.tableModel.restData};l.getTable(a.tableModel.restURL,e,function(t){a.q=a.tableModel.restData.q,0===t.errorCode&&(a.tableModel=l.table(a.tableModel,e,t),setTimeout(function(){i(),$(window).on("resize",i),a.$apply(),$(".no-result").removeClass("hidden")},500))})}function s(){a.tableModel={tableHeader:[Lang.getValByKey("area","area_country_id"),Lang.getValByKey("area","area_country_name"),Lang.getValByKey("area","area_city_name"),Lang.getValByKey("area","area_code_start"),Lang.getValByKey("area","area_code_end"),Lang.getValByKey("area","area_code_parentId")],tableHeaderSize:["8%","22%","22%","16%","16%","16%"],tableBody:[],restURL:"logistics.searchList",restData:{q:"",pageIndex:1,pageSize:10}},o()}n.initTab(function(a){1==a&&($(".no-result").addClass("hidden"),s())});var c,g,u,y;a.initSelectList=function(){var e;e=t.getAddressData("CN","CN"),c=selectFactory({data:e,id:"province",defaultCount:e.data.length,attrTextModel:function(e,n){var l;if(l=e?r(e,n):{},a.detailData=l,c.id=l.id,a.$apply(),d(c),e){var i=t.getAddressData("CN",c.id);i.data.length?(g.setData(i),g.setDefaultCount(i.data.length),i.data.length>0&&g.open()):g.setData([])}}}),g=selectFactory({data:[],id:"city",attrTextModel:function(e,n){var l;if(l=e?r(e,n):{},a.detailData=l,g.id=l.id,a.$apply(),d(g),e){var i=t.getAddressData("CN",g.id);i.data.length?(u.setData(i),u.setDefaultCount(i.data.length),i.data.length>0&&u.open()):u.setData([])}}}),c.next=g,u=selectFactory({data:[],id:"area",attrTextModel:function(e,n){var l;if(l=e?r(e,n):{},a.detailData=l,u.id=l.id,a.$apply(),d(u),e){var i=t.getAddressData("CN",u.id);i.data.length?(y.setData(i),y.setDefaultCount(i.data.length),i.data.length>0&&y.open()):y.setData([])}}}),g.next=u,y=selectFactory({data:[],id:"street",attrTextModel:function(e,t){var n;n=e?r(e,t):{},a.detailData=n,y.id=n.id,a.$apply()}}),u.next=y},a.searchCountry=function(){a.tableModel.restData.pageIndex=1,o()}}])});