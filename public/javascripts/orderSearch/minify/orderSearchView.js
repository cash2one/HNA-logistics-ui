app.factory("orderSearchView",["tableService","orderSearchService",function(e,t){var a={};return a.initCalander=function(e){Calander.init({ele:["#startTime","#endTime"]}),e.orderSearch.startTime=getBeforeDate(6)+" 00:00:00",e.orderSearch.endTime=(new Date).format("yyyy-MM-dd 23:59:59")},a.initSelect=function(e){function a(e,a){a||(a=1);var r={urlParams:{q:e||"",pageIndex:a,pageSize:10,userType:1}},o=t.getUserNameListWithoutNoAudit(r);return o.data&&o.data.forEach(function(e,t){e.fullName&&e.userName&&(e.fullName+="("+e.userName+")")}),console.log(o),o}var r=a();selectFactory({data:r,isSearch:!0,isUsePinyin:!0,defaultText:Lang.getValByKey("common","common_select_tips"),id:"select-customer",showTextField:"fullName",pagination:!0,searchPlaceHoder:"请输入姓名或用户名",attrTextField:{"ng-value":"id"},closeLocalSearch:!0,onSearchValueChange:function(e,t,r){var o=a(t,r);e.setData(o)},attrTextId:function(t){e.orderSearch.cusUserId=t,e.$apply()},attrTextModel:function(t){e.orderCustomerName=t,e.$apply()}}).setData(r),$("#select-client").val(e.orderClientName)},a.InitOrderStatus=function(e){if(!a){e.orderStatusData=t.getOrderStatus();var a=selectFactory({data:e.orderStatusData,defaultText:Lang.getValByKey("common","common_all_tips"),id:"select-orders-status",showTextField:"name",isSaveInputVal:!0,attrTextField:{"ng-value":"code"},attrTextId:function(t){e.orderSearch.orderStatus=t,e.$apply()},attrTextModel:function(t){e.ordersStatusName=t,e.$apply()}});a.setData(e.orderStatusData)}},a.initTable=function(e){e.tableModel={tableHeader:["序号","客户单号","运单号","产品信息","客户信息","货物类型","起止地","创建时间","订单状态"],tableBody:[],restURL:"logistics.searchLogisticalOrder",restData:{pageIndex:1,pageSize:10,sort:"createTime",productUid:"",asc:!1},selectNumber:0,selectFlag:!1}},a.bindEvent=function(e){e.getCustomer=a.initSelect(e),e.showOrderStatus=a.InitOrderStatus(e)},a}]);