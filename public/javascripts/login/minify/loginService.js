easySpa.use(["service/cookieService","widget/prompt"]),app.factory("loginService",["easyHttp","cookieService",function(e,t){var a={};return a.setXtoken=function(){var a=t.get("token");if(a)$.ajaxSetup({headers:{"x-token":a}}),e.get("logistics.loginCheck",function(a){if(401==a.errorCode){t.delete("token");var o=e.get("logistics.getToken");$.ajaxSetup({headers:{"x-token":o.data}}),t.delete("token"),t.set("token",o.data,1)}});else{var o=e.get("logistics.getToken");$.ajaxSetup({headers:{"x-token":o.data}}),t.set("token",o.data,1)}},a.getCodeImage=function(){e.get("logistics.getCodeImage",{headers:{accept:"text/base64"}},function(e){angular.element($("#big-img")).css({"background-image":"url(data:image/jpeg;base64,"+e+")"})})},a.checkCode=function(t,a,o){o(e.post(t,{urlParams:a}))},a.login=function(t,a,o){e.post(t,a,o)},a}]);