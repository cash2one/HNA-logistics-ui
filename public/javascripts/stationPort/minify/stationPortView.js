app.factory("stationPortView",["tableService","stationPortService",function(t,a){return{getCityList:function(t,e,n){n||(n=1);var r={urlParams:{countryCode:t.countryId,parentId:t.countryId,q:e?e.trim():"",pageIndex:n,pageSize:10}};return a.getCity(r)},getCountryData:function(t,e){e||(e=1),t=t||"";var n={urlParams:{q:t,pageIndex:e,pageSize:10}};return a.getCountry(n)},rebuildName:function(t){if(t)for(var a=0;a<t.length;a++)t[a].name=t[a].name+"("+t[a].figureCode+")"},initSelect:function(t,a,e){function n(t){var a=t.next;if(null!=a)return a.clearData(),a.id=null,n(a)}var r={},o=this;r=this.getCountryData(),this.rebuildName(r.data),a=selectFactory({data:r,id:"countrySearch",isSearch:!0,onBeforeShow:!1,pagination:!0,searchPlaceHoder:"请输入国家名称或二字码",onSearchValueChange:function(t,a,e){var n=o.getCountryData(a,e);o.rebuildName(n.data),t.setData(n)},attrTextModel:function(e,r,o){t.countrySearch=e,t.countrySearchId=o.figureCode,t.citySearch="",t.citySearchId="";t.countrySearchId,t.countrySearchId;t.figureCode=o.figureCode,t.countryId=o.figureCode,t.$apply(),n(a)}}),e=selectFactory({data:[],isSearch:!0,id:"citySearch",isSaveInputVal:!0,closeLocalSearch:!0,pagination:!0,searchPlaceHoder:"请输入城市名称",onSearchValueChange:function(a,e,n){var e=o.getCityList(t,e,n);a.setData(e),t.$apply()},attrTextModel:function(a,e,n){t.citySearch=a,t.citySearchId=n.id,t.$apply()}}),a.next=e},initTable:function(t){t.tableModel={more:!1,userWord:"",tableHeader:[Lang.getValByKey("common","common_thead_number"),Lang.getValByKey("stationPort","stationPort_table_name"),Lang.getValByKey("stationPort","stationPort_table_nameEn"),Lang.getValByKey("stationPort","stationPort_table_code"),Lang.getValByKey("stationPort","stationPort_table_country"),Lang.getValByKey("stationPort","stationPort_table_city"),Lang.getValByKey("stationPort","stationPort_table_addr"),Lang.getValByKey("stationPort","stationPort_table_type"),Lang.getValByKey("stationPort","common_page_remarks")],tableBody:[],restURL:"logistics.getAllPorts",restData:{q:"",locked:-1,pageIndex:1,pageSize:10,sort:"code"},seatData:{uid:""},selectNumber:0,selectFlag:!1},t.refreshTableData()},initPromptSelect:function(t,a,e){function n(t){var a=t.next;if(null!=a)return a.clearData(),a.id=null,n(a)}function r(t,a){for(var a=a.data,e=0;e<a.length;e++)if(a[e].name==t)return a[e]}var o;o=this.getCountryData(),this.rebuildName(o.data);var i=this;a=selectFactory({data:o,id:"country",isSearch:!0,defaultText:Lang.getValByKey("common","common_select_tips"),pagination:!0,searchPlaceHoder:"请输入国家名称或二字码",onSearchValueChange:function(t,a,e){var n=i.getCountryData(a,e);i.rebuildName(n.data),t.setData(n)},attrTextModel:function(e,o){var i;i=e?r(e,o):{},t.countryId=i.figureCode,t.countryName=i.name,t.cityName="",t.cityId="",t.isEditCity=!1,t.$apply(),n(a)}}),e=selectFactory({data:[],id:"city",isSearch:!0,isSaveInputVal:"true",closeLocalSearch:!0,defaultText:Lang.getValByKey("common","common_select_tips"),pagination:!0,searchPlaceHoder:"请输入城市名称",onSearchValueChange:function(a,e,n){var e=i.getCityList(t,e,n);a.setData(e),t.$apply()},attrTextModel:function(a,e){var n;n=a?r(a,e):{},t.cityName=n.name,t.cityId=n.id,t.$apply()}}),a.next=e}}}]);