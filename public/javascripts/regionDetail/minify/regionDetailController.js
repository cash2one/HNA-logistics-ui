easySpa.require(["widget/slimscroll","widget/prompt","widget/select","public/common/tableController.js","widget/parseUrl","widget/tab","public/common/areaController.js","public/common/areaService.js"],function(){app.controller("regionDetailCtrl",["$scope","regionDetailService","regionDetailView","tableService","areaService",function(e,t,a,o,r){function n(){angular.forEach(e.tableModel.tableBody,function(t,a){if(t.areas&&t.areas.length){e.tableModel.tableBody[a].type=Lang.getValByKey("regionDetail","regDetail_code_countryArea"),e.tableModel.tableBody[a].typeValue="";for(var o=0,r=t.areas.length;o<r;o++)e.tableModel.tableBody[a].typeValue?e.tableModel.tableBody[a].typeValue+="，"+c(t.areas[o].name):e.tableModel.tableBody[a].typeValue+=c(t.areas[o].name)}else if(t.postcodes&&t.postcodes.length){e.tableModel.tableBody[a].type=Lang.getValByKey("regionDetail","regDetail_code_posts"),e.tableModel.tableBody[a].typeValue="";for(var o=0,r=t.postcodes.length;o<r;o++)e.tableModel.tableBody[a].typeValue?e.tableModel.tableBody[a].typeValue+="，"+t.postcodes[o].startPostcode+"-"+t.postcodes[o].endPostcode:e.tableModel.tableBody[a].typeValue+=t.postcodes[o].startPostcode+"-"+t.postcodes[o].endPostcode}else if(t.ports&&t.ports.length){1==e.productGroupId?e.tableModel.tableBody[a].type="港口":6==e.productGroupId&&(e.tableModel.tableBody[a].type="机场"),e.tableModel.tableBody[a].typeValue="";for(var o=0,r=t.ports.length;o<r;o++)1==e.productGroupId?t.ports[o].oName=t.ports[o].name:6==e.productGroupId&&(t.ports[o].oName=t.ports[o].triadCode),e.tableModel.tableBody[a].typeValue?e.tableModel.tableBody[a].typeValue+="，"+t.ports[o].oName:e.tableModel.tableBody[a].typeValue+=t.ports[o].oName}})}function i(e,a){a||(a=1),e=e||"";var o={urlParams:{q:e,pageIndex:a,pageSize:10}};return t.getCountryData(o)}function d(e){if(e)for(var t=0;t<e.length;t++)e[t].name=e[t].name+"("+e[t].figureCode+")"}function l(){var e=!0,t=0,a=$("#post-zone").children("li").length;return $("#post-zone").children("li").each(function(){var a=$.trim($(this).children(".u-post-start").val()),o=$.trim($(this).children(".u-post-end").val());a||o||++t,a&&!o?($(this).children(".u-post-end").addClass("post-error"),e=!1):!a&&o?($(this).children(".u-post-start").addClass("post-error"),e=!1):$(this).children("input").removeClass("post-error")}),t==a&&(e=!1,$("#post-zone").children("li").eq(0).children("input").addClass("post-error")),e}function s(e){var t=e&&e.length;t&&$("#post-zone").children("li").each(function(){for(var a=$.trim($(this).children(".u-post-start").val()),o=$.trim($(this).children(".u-post-end").val()),r=0;r<t;r++){if(a==e[r].startPostcode&&o==e[r].endPostcode){$(this).children("input").addClass("post-error");break}$(this).children("input").removeClass("post-error")}})}function c(e){if(!e&&"string"!=typeof e)return e;var t=e.lastIndexOf(h);return-1!=t&&(e=e.slice(t+1)),e}function p(e){if(!e&&"string"!=typeof e)return e;var t=e.indexOf(h);return-1!=t&&(e=e.slice(0,t)),e}function u(e,t){for(var t=t.data,a=0,o=t.length;a<o;a++)if(t[a].name==e)return t[a]}e.regionDetail={id:0};var g,m,h="/";e.tableModel={tableHeader:[Lang.getValByKey("common","common_thead_number"),Lang.getValByKey("common","common_thead_name"),Lang.getValByKey("common","common_code_code"),Lang.getValByKey("common","common_thead_type"),Lang.getValByKey("regionDetail","regDetail_code_countryArea"),Lang.getValByKey("common","common_page_remarks")],tableBody:[],restURL:"logistics.getRegionsByID",restData:{q:"",pageIndex:1,pageSize:10,schemaId:"",sort:"createTime"},selectNumber:0,selectFlag:!1},e.initData=function(){e.parameter=window.parseUrl.getParams(),e.productGroupId=1==e.parameter.productGroupId?1:6==e.parameter.productGroupId?6:11,e.titleName=e.parameter.name,e.editable=!0,"region"!=e.parameter.q&&1!=e.parameter.status&&(e.editable=!1),top.location.href.indexOf("isEdit=false")>-1&&(e.editable=!1),e.placeholder="请输入地区名称、二字码或邮编",1==e.productGroupId?(e.tableModel.tableHeader[4]="港口",e.placeholder="请输入港口名称（支持中英文名称）"):6==e.productGroupId&&(e.tableModel.tableHeader[4]="机场",e.placeholder="请输入三字码或机场名称")},e.initData(),e.getTable=function(){e.tableModel.restData.schemaId=e.parameter.schemaId;var t={urlParams:e.tableModel.restData};o.getTable(e.tableModel.restURL,t,function(r){if(0===r.errorCode){e.tableModel=o.table(e.tableModel,t,r),n();var i=a.height("table");setTimeout(function(){a.slimscroll(".table-container tbody",i),$(window).resize(function(){i=a.height("table"),a.slimscroll(".table-container tbody",i)})},10)}})},e.getTable(),e.$watch("tableModel",function(e,t){e!==t&&n()},!0),e.search=function(){e.tableModel.restData.pageIndex=1,e.q=e.tableModel.restData.q,e.getTable()},e.goBack=function(){"region"==e.parameter.q?window.location.href="#/"+e.parameter.q+"?index="+e.parameter.index:"servicesApproval"===e.parameter.q?window.location.href="#/"+e.parameter.q+"?uid="+e.parameter.uid+"&status="+e.parameter.checkStatus:"services"===e.parameter.q?e.parameter.isfromprice?window.location.href="#/"+e.parameter.q+"?uid="+e.parameter.uid+"&backfrom=region&isfromprice=1&priceData="+e.parameter.priceData:window.location.href="#/"+e.parameter.q+"?uid="+e.parameter.uid+"&backfrom=region":e.parameter.orderNo?window.location.href="#/"+e.parameter.q+"?uid="+e.parameter.uid+"&orderNo="+e.parameter.orderNo+"&id="+e.parameter.id+"&from="+e.parameter.from+"&type="+e.parameter.type+"&index="+e.parameter.index+"&workId="+e.parameter.workId+"&isJustShow="+e.parameter.isJustShow+"&origin="+e.parameter.origin:window.location.href="#/"+e.parameter.q+"?uid="+e.parameter.uid+"&id="+e.parameter.id+"&from="+e.parameter.from+"&type="+e.parameter.type+"&index="+e.parameter.index},e.del=function(){var r=[],n=o.getSelectTable(e.tableModel.tableBody);if(!n.length)return a.promptBox({isDelay:!0,contentDelay:Lang.getValByKey("common","common_code_noSelected"),type:"errer",manualClose:!0}),!1;angular.forEach(n,function(e){r.push(e.id)});var i={title:Lang.getValByKey("common","common_prompt_title"),type:"warning",content:{tip:Lang.getValByKey("regionDetail","regDetail_code_delTips")},operation:[{type:"submit",description:Lang.getValByKey("common","common_page_delete"),application:"delete",operationEvent:function(){t.del(r,function(t){0===t.errorCode?(a.promptBox({isDelay:!0,contentDelay:t.msg,type:"success"}),e.$apply(e.getTable()),a.promptBox("closePrompt")):a.promptBox({isDelay:!0,contentDelay:t.msg,type:"errer",manualClose:!0})})}}]};a.promptBox(i)},e.add=function(){e.form.$setPristine(),e.form.$setUntouched(),e.regionName="",e.regionCode="",e.regionZone="",e.selectedData=[],e.choosedData=[],e.regionSeaAirZone="",e.seaAirChoosedData=[],e.remark="",$("#remote-zone-msg, #remote-seaair-msg").html(""),1==e.productGroupId?e.regionType="港口":6==e.productGroupId?e.regionType="机场":(e.regionType=Lang.getValByKey("regionDetail","regDetail_code_countryArea"),e.regionTypeValue=1),e.regionDetail.id=0,$(document).promptBox({title:Lang.getValByKey("regionDetail","regDetail_code_addRegion"),loadTitle:function(){return Lang.getValByKey("regionDetail","regDetail_code_addRegion")},isMiddle:!0,isNest:!0,content:{nest:$("#detail")},loadData:function(){$('#nest-contactsDetail .other-btn button[name="prompt-operation"]').addClass("edit").removeClass("save")},operation:[{type:"submit",description:Lang.getValByKey("common","common_page_save"),operationEvent:function(){e.saveRegionDetail(),e.$apply()}}]})},e.checkCode=function(){var a={urlParams:{schemaId:e.parameter.schemaId,code:e.regionCode,sid:e.regionDetail.id}};e.regionCode&&t.checkCode(a,function(t){0!=t.errorCode?(e.form.regionCode.errorTips=t.msg,$("#code-msg").removeClass("ng-hide").addClass("remote-invalid")):($("#code-msg").addClass("ng-hide").removeClass("remote-invalid"),e.form.regionCode.errorTips="")})},e.saveRegionDetail=function(){if(e.regionName||e.form.regionName.$setDirty(),e.regionCode||e.form.regionCode.$setDirty(),11==e.productGroupId){if(1!=e.regionTypeValue||e.regionZone||e.form.regionZone.$setDirty(),2!=e.regionTypeValue||e.regionCountry||e.form.regionCountry.$setDirty(),2==e.regionTypeValue&&!l())return;if(2==e.regionTypeValue&&e.checkPostResult)return;if($("#code-msg").hasClass("remote-invalid"))return}else 11!=e.productGroupId&&(e.regionSeaAirZone||e.form.regionSeaAirZone.$setDirty());if(!e.form.$valid)return void scrollToErrorView($("#nest-detail .prompt-content"));var o={urlParams:{schemaId:e.parameter.schemaId,name:e.regionName,code:e.regionCode,description:e.remark,postcodes:[],areas:[],ports:[]}};if(11==e.productGroupId){if(1==e.regionTypeValue){var r={};angular.forEach(e.choosedData,function(e,t){r={figureCode:e.figureCode,name:e.name},o.urlParams.areas.push(r)})}else if(2==e.regionTypeValue){var r={};$("#post-zone").children("li").each(function(){var t=e.regionCountryId,a=$(this).children(".u-post-start").val(),n=$(this).children(".u-post-end").val();t&&a&&n&&(r={country:e.regionCountryId,startPostcode:angular.uppercase($(this).children(".u-post-start").val()),endPostcode:angular.uppercase($(this).children(".u-post-end").val())},o.urlParams.postcodes.push(r))})}}else o.urlParams.ports=e.seaAirChoosedData;e.regionDetail.id?(o.seatParams={id:e.regionDetail.id},t.saveEditRegionDetail(o,function(t){0===t.errorCode?(a.promptBox({isDelay:!0,contentDelay:t.msg,type:"success"}),e.getTable(),a.promptBox("closeFormPrompt")):1e5==t.errorCode?1==e.regionTypeValue?$("#remote-zone-msg").html(t.msg):2==e.regionTypeValue?s(t.data):$("#remote-seaair-msg").html(t.msg):a.promptBox({isDelay:!0,contentDelay:t.msg,type:"errer",manualClose:!0})})):t.saveRegionDetail(o,function(t){0===t.errorCode?(a.promptBox({isDelay:!0,contentDelay:t.msg,type:"success"}),e.getTable(),a.promptBox("closeFormPrompt")):1e5==t.errorCode?1==e.regionTypeValue?$("#remote-zone-msg").html(t.msg):2==e.regionTypeValue?s(t.data):$("#remote-seaair-msg").html(t.msg):a.promptBox({isDelay:!0,contentDelay:t.msg,type:"errer",manualClose:!0})})},e.init=function(){selectFactory({data:{data:[{id:1,name:Lang.getValByKey("regionDetail","regDetail_code_countryArea")},{id:2,name:Lang.getValByKey("regionDetail","regDetail_code_posts")}]},defaultText:"",id:"type-select-input",showTextField:"name",attrTextField:{"ng-value":"id"},attrTextId:function(t){e.regionTypeValue=t},attrTextModel:function(t){if(e.regionType!=t)if(Select.sharePool.country="",e.regionDetail.id)if(1==e.regionTypeValue){e.choosedData=[],e.selectedData=[],e.regionZone="";var a={};angular.forEach(e.editData.areas,function(t,o){var r=c(t.name),n=c(t.figureCode),i=p(t.figureCode);e.regionZone+="，"+r,a={id:n,name:r,figureCode:i,delete:!1,isShow:!0,checkbox:e.selectedFlag,interId:t.figureCode,interName:t.name},e.choosedData.push(a),e.selectedData.push(a)}),e.regionZone&&(e.regionZone=e.regionZone.slice(1))}else 2==e.regionTypeValue&&e.post.restData(e.editData.postcodes);else 1==e.regionTypeValue?e.regionZone="":2==e.regionTypeValue&&(e.regionCountry="",e.regionCountryId="",e.post.restData());e.regionType=t,e.$apply()}})},e.showRegionCountry=function(){e.countryRegionData=i(),d(e.countryRegionData.data),countryRegionEle=selectFactory({data:e.countryRegionData,isSearch:!0,pagination:!0,searchPlaceHoder:"请输入国家名称或二字码",id:"country",showTextField:"name",onSearchValueChange:function(e,t,a){var o=i(t,a);d(o.data),e.setData(o)},attrTextModel:function(t,a){var o=u(t,a);e.regionCountry=t,e.regionCountryId=o&&o.figureCode,e.$apply()}})},e.edit=function(a){e.editable&&(e.regionDetail.id=a,e.form.regionCode.errorTips="",$("#remote-zone-msg, #remote-seaair-msg").html(""),t.getEdit(a,function(t){if(t&&0===t.errorCode){if(e.editData=t.data,e.regionName=t.data.name,e.regionCode=t.data.code,e.remark=t.data.description,e.regionCountry="",e.regionCountryId="",1==e.productGroupId?e.regionType="港口":6==e.productGroupId&&(e.regionType="机场"),t.data.areas.length){e.regionType=Lang.getValByKey("regionDetail","regDetail_code_countryArea"),e.regionTypeValue=1,e.regionZone="",e.choosedData=[],e.selectedData=[];var a={};angular.forEach(t.data.areas,function(t,o){var r=c(t.name),n=c(t.figureCode);p(t.figureCode);e.regionZone+="，"+r,a={id:n,name:r,figureCode:t.figureCode,delete:!1,isShow:!0,checkbox:e.selectedFlag,interId:t.figureCode,interName:t.name},e.choosedData.push(a),e.selectedData.push(a)}),e.regionZone&&(e.regionZone=e.regionZone.slice(1))}else t.data.postcodes.length?(e.regionType=Lang.getValByKey("regionDetail","regDetail_code_posts"),e.regionTypeValue=2,e.post.restData(t.data.postcodes)):t.data.ports.length&&(e.regionSeaAirZone="",e.seaAirChoosedData=[],e.selectedData=[],angular.forEach(t.data.ports,function(t,a){var o="";1==e.productGroupId?o=t.name+"("+t.enName+")":6==e.productGroupId&&(o=t.triadCode+"("+t.name+")"),e.regionSeaAirZone+="，"+o;var r={areaId:t.areaId,countryCode:t.countryCode,name:o,transportId:t.transportId,delete:!1,isShow:!0,checkbox:!1};e.seaAirChoosedData.push(r),e.selectedData.push(r)}),e.regionSeaAirZone=e.regionSeaAirZone?e.regionSeaAirZone.slice(1):"");$(document).promptBox({title:Lang.getValByKey("regionDetail","regDetail_code_editRegion"),loadTitle:function(){return Lang.getValByKey("regionDetail","regDetail_code_editRegion")},isMiddle:!0,isNest:!0,content:{nest:$("#detail")},loadData:function(){$('#nest-contactsDetail .other-btn button[name="prompt-operation"]').addClass("edit").removeClass("save")},operation:[{type:"submit",description:Lang.getValByKey("common","common_page_save"),operationEvent:function(){e.saveRegionDetail(),e.$apply()}}]})}}))},e.post={max:100,length:1,addFlag:!0,delFlag:!1,data:[{start:"",end:""}]},e.post.del=function(t){if(!(e.post.length<=1)){e.post.data.splice(t,1).length&&(--e.post.length,e.post.addFlag=!0,1==e.post.length&&(e.post.delFlag=!1))}},e.post.add=function(){e.post.length>=e.post.max||(e.post.data.push({start:"",end:""}),++e.post.length,e.post.delFlag=!0,e.post.length==e.post.max&&(e.post.addFlag=!1))},e.post.restData=function(t){if(e.checkPostResult=!1,t&&t.length){var a=t.length;e.post.length=a,e.post.data=[],e.post.delFlag=a>1,a<e.post.max?e.post.addFlag=!0:e.post.addFlag=!1;for(var o={},r=0;r<a;r++)e.regionCountry=t[r].countryName,e.regionCountryId=t[r].country,o={start:t[r].startPostcode,end:t[r].endPostcode},e.post.data.push(o)}else e.post.length=1,e.post.addFlag=!0,e.post.delFlag=!1,e.regionCountry="",e.regionCountryId="",e.post.data=[{start:"",end:""}]},e.rePostClass=function(t){e.checkPostResult=!1,$("#post-zone input").each(function(){var t=$(this).val();t?/^[0-9a-zA-Z]*$/g.test(t)?$(this).removeClass("post-error post-errors"):(e.checkPostResult=!0,$(this).addClass("post-errors")):$(this).removeClass("post-error post-errors")})},e.selectRegion=function(){e.initCtrl(),$(document).promptBox({title:Lang.getValByKey("regionDetail","regDetail_page_countryAdd"),isHidden:!0,boxWidth:!0,isNest:!0,loadData:function(){e.loadRegionData()},content:{nest:$("#serviceZone")},operation:[{type:"submit",description:Lang.getValByKey("common","common_prompt_confirm"),operationEvent:function(){$(document).promptBox("closeSlideBox");var t="";angular.forEach(e.areaModel.selectedData,function(e,a){t+="，"+e.name.split("/")[e.name.split("/").length-1]}),t&&(t=t.slice(1)),e.regionZone=t,e.choosedData=[];var a={};angular.forEach(e.areaModel.selectedData,function(t,o){a={figureCode:t.interId,name:t.name.split("/")[t.name.split("/").length-1]},e.choosedData.push(a)}),e.$apply()}}]})};var y={unSelectedData:[],selectedData:[],candidateFlag:!1,selectedFlag:!1};e.loadRegionData=function(){var a={urlParams:{pageIndex:1,pageSize:300}};y.unSelectedData=t.getCountry(a).data,y.selectedData=e.choosedData,e.tab.selected(0),e.areaModel=r.initArea(y)};var g,m;e.getCountryList=function(e,a){var o={urlParams:{q:e||"",pageIndex:a||1,pageSize:10}},r=t.getCountryList(o);return angular.forEach(r.data,function(e,t){e.name+="("+e.figureCode+")"}),r},e.showCountry=function(){g||(g=selectFactory({data:[],isSearch:!0,id:"select-country",defaultText:Lang.getValByKey("common","common_select_tips"),pagination:!0,closeLocalSearch:!0,searchPlaceHoder:"请输入国家名称或二字码",onSearchValueChange:function(t,a,o){var r=e.getCountryList(a,o);t.setData(r)},attrTextModel:function(t,a,o){e.countryName=t,e.countryFigureCode=o.figureCode,e.cityName="",e.cityId="",e.getAirSeaData(),e.$apply()}}),g.open())},e.getCityList=function(a,o){var r={urlParams:{q:a||"",countryCode:e.countryFigureCode,parentId:e.countryFigureCode,pageIndex:o||1,pageSize:10}};return t.getCityList(r)},e.showCity=function(){m||(m=selectFactory({data:[],id:"select-city",isSearch:!0,defaultText:Lang.getValByKey("common","common_select_tips"),isUsePinyin:!0,showTextField:"name",pagination:!0,closeLocalSearch:!0,searchPlaceHoder:"请输入市名称",onSearchValueChange:function(t,a,o){if(!e.countryFigureCode)return!1;var r=e.getCityList(a,o);t.setData(r)},attrTextModel:function(t,a,o){e.cityName=t,e.cityId=o.id,e.getAirSeaData(),e.$apply()}}),m.open())},e.getAirSeaData=function(){if(e.unSelectedData=[],e.candidateFlag=!1,e.countryFigureCode){var a={urlParams:{type:e.productGroupId,countryId:e.countryFigureCode,cityId:e.cityId,pageIndex:1,pageSize:2e4}};t.getAirSeaData(a,function(t){0===t.errorCode&&(angular.forEach(t.data,function(t,a){var o={transportId:t.id,countryCode:e.countryFigureCode,areaId:t.cityId,delete:!1,isShow:!0,checkbox:e.candidateFlag};1==e.productGroupId?o.name=t.name+"("+t.englishName+")":6==e.productGroupId&&(o.name=t.triadCode+"("+t.name+")"),e.unSelectedData.push(o)}),e.delCandidate())});var o=$("#airSeaZone").height()-255;$("#candidateZones").slimscroll({height:o}),$(window).resize(function(){var e=$("#airSeaZone").height()-255;$("#candidateZones").slimscroll({height:e})})}},e.airSeaCandidateAll=function(){angular.forEach(e.unSelectedData,function(t,a){e.candidateFlag?e.unSelectedData[a].checkbox=!0:e.unSelectedData[a].checkbox=t.delete})},e.airSeaCandidateOne=function(t){var a=0;angular.forEach(e.unSelectedData,function(e,o){e.transportId==t&&(e.checkbox=!e.checkbox),e.checkbox||++a}),e.candidateFlag=!a},e.seaAirSearchCandidate=function(){var t=e.seaAirSearchCandidateVal?e.seaAirSearchCandidateVal.toLowerCase():"";angular.forEach(e.unSelectedData,function(a,o){e.unSelectedData[o].name&&-1!=e.unSelectedData[o].name.toLowerCase().indexOf(t)?e.unSelectedData[o].isShow=!0:e.unSelectedData[o].isShow=!1})},e.selectedToRight=function(){angular.forEach(e.unSelectedData,function(t,a){if(e.unSelectedData[a].checkbox&&!e.unSelectedData[a].delete&&e.unSelectedData[a].isShow){var o={};o=$.extend({},e.unSelectedData[a]),o.checkbox=e.selectedFlag,e.selectedData.unshift(o),e.unSelectedData[a].delete=!0}})},e.airSeaSelectedAll=function(){angular.forEach(e.selectedData,function(t,a){e.selectedFlag?e.selectedData[a].checkbox=!0:e.selectedData[a].checkbox=!1})},e.airSeaSelectedOne=function(t){var a=0;angular.forEach(e.selectedData,function(e,o){e.transportId==t&&(e.checkbox=!e.checkbox),e.checkbox||++a}),e.selectedFlag=!a},e.selectedToLeft=function(){for(var t=e.unSelectedData,a=e.selectedData,o=[],r=t.length,n=a.length,i=0;i<n;i++)if(a[i].checkbox&&a[i].isShow)for(var d=0;d<r;d++)a[i].transportId==t[d].transportId&&t[d].delete&&(t[d].delete=!1,t[d].checkbox=e.candidateFlag);else{var l=$.extend({},a[i]);o.push(l)}e.unSelectedData=t,e.selectedData=o},e.seaAirSearchSelected=function(){var t=e.seaAirSearchSelectedVal?e.seaAirSearchSelectedVal.toLowerCase():"";angular.forEach(e.selectedData,function(a,o){e.selectedData[o].name&&-1!=e.selectedData[o].name.toLowerCase().indexOf(t)?e.selectedData[o].isShow=!0:e.selectedData[o].isShow=!1})},e.selectOtherRegion=function(){$("#airSeaZone").show(),e.airSeaZone=!0,e.airSeaZoneTitle=1==e.productGroupId?"添加港口":"添加机场",e.candidateFlag=!1,e.unSelectedData=[],e.selectedFlag=!1,e.countryName="",e.countryFigureCode="",e.cityName="",e.cityId="",e.seaAirSearchCandidateVal="";var t=window.innerHeight-260;$("#candidateZones, #selectedZones").slimscroll({height:t}),$(window).resize(function(){t=window.innerHeight-260,$("#candidateZones, #selectedZones").slimscroll({height:t})})},e.cfmSeaAirSelected=function(){$("#remote-seaair-msg").html("");var t="";e.seaAirChoosedData=[],angular.forEach(e.selectedData,function(a,o){t+="，"+a.name,e.seaAirChoosedData.push({countryCode:a.countryCode,areaId:a.areaId,name:a.name,transportId:a.transportId})}),e.regionSeaAirZone=t?t.slice(1):"",e.airSeaZone=!1},e.delCandidate=function(){for(var t=e.selectedData.length,a=e.unSelectedData.length,o=e.unSelectedData,r=e.selectedData,n=0;n<a;n++)o[n].delete=!1;if(t&&a)for(var i=0;i<t;i++)for(var d=0;d<a;d++)r[i].transportId==o[d].transportId&&(o[d].delete=!0,o[d].checkbox=!0);e.unSelectedData=o;for(var l=0,s=0;s<a;s++)e.unSelectedData[s].checkbox&&++l;e.candidateFlag=l==a}}])});