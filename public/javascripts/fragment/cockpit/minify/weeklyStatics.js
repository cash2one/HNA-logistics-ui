app.controller("weeklyStaticsCtrl",["$scope","$route","cockpitService",function(e,t,o){var a=echarts.init(document.getElementById("weeklyChart")),i=0===(new Date).getDay()?7:(new Date).getDay(),l=getBeforeDate(i);e.stateName="物流",e.stateCode="logistics",e.weeklyStart=getBeforeDate(i+34),e.weeklyEnd=l,function(){Calander.init({ele:["#startTime","#endTime"],isClear:!0,showHour:!1,showMinute:!1,showSecond:!1,showTime:!1})}(),function(){var t={data:[{name:"物流",code:"logistics"},{name:"贸易",code:"trade"}]};selectFactory({data:t,id:"state",defaultText:null,attrTextModel:function(t,o,a){"logistics"===a.code?(e.stateName="物流",e.stateCode="logistics"):(e.stateName="贸易",e.stateCode="trade"),e.$apply()}})}(),e.initChart=function(){var t={urlParams:{startDate:e.weeklyStart,endDate:e.weeklyEnd},seatParams:{type:e.stateCode}};o.getWeeklyStatics(t,function(e){if(0===e.errorCode){var t=[],o=[],i=[];e.data.statisticsList.forEach(function(e,a){t.push("w"+e.week+"\r\n"+e.year),o.push(e.amount),i.push(e.billCount)});var l={color:["#09ACF8","#7938D0 "],tooltip:{trigger:"axis",backgroundColor:"#fff",textStyle:{color:"#8CA0B3",fontsize:16},axisPointer:{type:"cross",label:{show:!0,backgroundColor:"transparent",textStyle:{color:"transparent"}},lineStyle:{color:"#C6EAFF",type:"solid",opacity:.69},crossStyle:{color:"#C6EAFF",type:"solid",opacity:.69}}},legend:{left:"center",top:12,data:[{name:"交易额",icon:"circle",textStyle:{color:"#8CA0B3"}},{name:"订单量",icon:"circle",textStyle:{color:"#8CA0B3"}}]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:t,boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:"#4187E6",width:1,type:"solid",opacity:.61}},axisLabel:{show:!0,color:"#8CA0B3",fontSize:16,margin:10},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#8CA0B3",type:"dotted",opacity:.4}}}],yAxis:[{type:"value",name:"CNY",nameTextStyle:{color:"#697B8C",fontSize:16},position:"left",axisLine:{show:!0,lineStyle:{color:"#4187E6",width:1,type:"solid",opacity:.61}},axisLabel:{show:!0,color:"#8CA0B3",fontSize:16,margin:20},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#8CA0B3",type:"dotted",opacity:.4}}},{type:"value",name:"单",nameTextStyle:{color:"#697B8C",fontSize:16},position:"right",axisLine:{show:!0,lineStyle:{color:"#4187E6",width:1,type:"solid",opacity:.61}},axisLabel:{show:!0,color:"#8CA0B3",fontSize:16,margin:20},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#8CA0B3",type:"dotted",opacity:.4}}}],series:[{name:"交易额",type:"line",smooth:!0,yAxis:1,lineStyle:{normal:{color:"#09ACF8",width:2,type:"solid",shadowColor:"#3BAFDA",shadowBlur:12}},areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgb(193, 231, 251)"},{offset:1,color:"rgb(251, 240, 253)"}],globalCoord:!1}}},symbol:"none",data:o},{name:"订单量",type:"line",smooth:!0,yAxisIndex:1,lineStyle:{normal:{color:"#9958F0",width:2,type:"solid",shadowColor:"#813AE0",shadowBlur:12}},areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgb(171, 166, 243)"},{offset:1,color:"rgb(230, 234, 245)"}],globalCoord:!1}}},symbol:"none",data:i}]};a.setOption(l)}})},e.$on("changeToIndicator",function(t,o){e.initChart()}),t.current.params&&e.initChart()}]);