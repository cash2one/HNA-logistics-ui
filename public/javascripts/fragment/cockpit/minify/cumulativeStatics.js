app.controller("cumulativeCtrl",["$scope","cockpitService",function(t,o){function e(){for(var o=0;o<t.datas.length;o++)!function(o){var e=t.datas,i="myChart_"+o,n="option_"+o;n={series:[{name:"",type:"pie",radius:["76%","82%"],labelLine:{normal:{show:!1}},hoverAnimation:!1,silent:!0,data:[{value:e[o].tradeCount,itemStyle:{normal:{color:{type:"linear",x:1,y:1,x2:0,y2:0,colorStops:[{offset:0,color:"#E1DFFD"},{offset:.34,color:"#00C5FE"},{offset:1,color:"#3A93FF"}]},borderColor:new echarts.graphic.LinearGradient(1,1,0,0,[{offset:0,color:"#E1DFFD"},{offset:.34,color:"#00C5FE"},{offset:1,color:"#3A93FF"}]),borderWidth:5}}},{value:e[o].logisticsCount,itemStyle:{normal:{color:"rgba(128,128,128,0)",borderColor:new echarts.graphic.LinearGradient(1,1,0,0,[{offset:0,color:"#E1DFFD"},{offset:.34,color:"#00C5FE"},{offset:1,color:"#3A93FF"}]),borderWidth:5,opacity:.2}}}]}]},i=echarts.init(document.getElementById("trade"+o)),i.setOption(n)}(o)}var i=(new Date).format("yyyy-MM-dd"),n="不限";t.datas=[],function(){Calander.init({ele:["#cumulativeStartTime","#cumulativeEndTime"],isClear:!0,showHour:!1,showMinute:!1,showSecond:!1,showTime:!1}),t.cumulativeStart=n,t.cumulativeEnd=i}(),t.getCumulativeStatics=function(){var i={urlParams:{startDate:t.cumulativeStart===n?"":t.cumulativeStart.replace(/(^\s+)|(\s+$)/g,""),endDate:t.cumulativeEnd.replace(/(^\s+)|(\s+$)/g,"")}};o.getCumulativeStatics(i,function(o){0===o.errorCode&&o.data&&(o.data.forEach(function(t,o){"supplier"!==t.id&&"customer"!==t.id||(t.unit="个"),t.allCount<1e4?(t._allCount="amount"===t.id||"volume"===t.id?t.allCount.toFixed(2):t.allCount,t._allCountUnit=t.unit):t.allCount<1e8&&t.allCount>=1e4?(t._allCount=(t.allCount/1e4).toFixed(2),t._allCountUnit="万"+t.unit):t.allCount>1e12?(t._allCount=(t.allCount/1e12).toFixed(2),t._allCountUnit="万亿"+t.unit):(t._allCount=(t.allCount/1e8).toFixed(2),t._allCountUnit="亿"+t.unit),t.logisticsCount<1e4?(t._logisticsCount="amount"===t.id||"volume"===t.id?t.logisticsCount.toFixed(2):t.logisticsCount,t._logisticsCountUnit=t.unit):t.logisticsCount<1e8&&t.logisticsCount>=1e4?(t._logisticsCount=(t.logisticsCount/1e4).toFixed(2),t._logisticsCountUnit="万"+t.unit):t.logisticsCount>1e12?(t._logisticsCount=(t.logisticsCount/1e12).toFixed(2),t._logisticsCountUnit="万亿"+t.unit):(t._logisticsCount=(t.logisticsCount/1e8).toFixed(2),t._logisticsCountUnit="亿"+t.unit),t.tradeCount<1e4?(t._tradeCount="amount"===t.id||"volume"===t.id?t.tradeCount.toFixed(2):t.tradeCount,t._tradeCountUnit=t.unit):t.tradeCount<1e8&&t.tradeCount>=1e4?(t._tradeCount=(t.tradeCount/1e4).toFixed(2),t._tradeCountUnit="万"+t.unit):t.tradeCount>1e12?(t._tradeCount=(t.tradeCount/1e12).toFixed(2),t._tradeCountUnit="万亿"+t.unit):(t._tradeCount=(t.tradeCount/1e8).toFixed(2),t._tradeCountUnit="亿"+t.unit)}),t.datas=o.data,setTimeout(function(){e()},10))})},t.getCumulativeStatics(),t.jumpTo=function(t,o){if("amount"!==t&&"volume"!==t)if("logistics"===o)switch(t){case"order":window.location.href="#/orders";break;case"supplier":window.location.href="#/supplier";break;case"customer":window.location.href="#/customer?module=logistics";break;default:return}else switch(t){case"order":window.location.href="#/tradeOrderSearch";break;case"supplier":window.location.href="#/supplier?module=trade";break;case"customer":window.location.href="#/customer?module=trade";break;default:return}}}]);