easySpa.require(["widget/select","widget/prompt","widget/richText"],function(){app.controller("contractTemplateDetailCtrl",["$scope","contractTemplateDetailService","contractTemplateDetailView",function(t,e,a){function r(){t.editContractTitle=!1,t.contractorTitle="",t.partAName="",t.partBName="",t.partAAddr="",t.partBAddr="",t.partAPhone="",t.partBPhone="",t.partABankAccount="",t.partBBankAccount="",t.partABankName="",t.partBBankName="",t.templateName="",t.userId=cookie.get("userId"),t.isSelfTemplate=!0,t.generateContractImm=!0,t.id=t.id||easySpa.queryUrlValByKey("id"),t.id||(t.id=0),t.id?($(".w-e-text").attr("contenteditable","false"),e.getContractTemplateById(t.id,function(e){if(0==e.errorCode){var a=e.data;t.contractorTitle=a.title,t.templateName=a.name,t.serviceTypeCode=a.serviceType,t.serviceType=a.serviceTypeName,$(".w-e-text").html(a.content),t.partAName=a.firstContractorDto.name,t.partAAddr=a.firstContractorDto.address,t.partAPhone=a.firstContractorDto.contact,t.partABankAccount=a.firstContractorDto.bankAccount,t.partABankName=a.firstContractorDto.bankName,t.partBName=a.secondContractorDto.name,t.partBAddr=a.secondContractorDto.address,t.partBPhone=a.secondContractorDto.contact,t.partBBankAccount=a.secondContractorDto.bankAccount,t.partBBankName=a.secondContractorDto.bankName,t.isSelfTemplate=t.userId==a.createUserId}}),t.isEdit=!1,t.editContractTitle=!1):(t.isSelfTemplate=!0,t.isEdit=!0,t.editContractTitle=!0)}$.extend(t,{initSelect:function(){a.initStateSelect(t)},bindEvent:function(){a.bindEvent(t)}}),r(),t.initSelect(),t.bindEvent(),t.cancel=function(){r()}}])});