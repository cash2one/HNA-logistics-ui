var controller={$scope:null,service:null,initViewButton:function(e){$.extend(!0,e.viewButton,{submit:!0,submitDisabled:!0,isSalesPrice:!0})},init:function(e,t){this.initViewButton(e),this.$scope=e,this.service=t,this.scopeEvent()},scopeEvent:function(){var e=this,t=e.$scope,i=e.service;t.infoCopy=function(){t.getInfo(),t.iPriceName=t.iInputPriceName=t.iInputPriceName+Lang.getValByKey("priceDetail","priceDetail_code_priceCopy");var e=0;t.copyPriceDetailList=[];for(var i=0,a=t.serviceTypeList.length;i<a;i++){t.copyPriceDetailList[i]=[];for(var r=t.serviceTypeList[i].sets||[],o=0,n=r.length;o<n;o++)e=r[o].id?r[o].id:0,t.copyPriceDetailList[i][o]=t.getOnePriceDetails(e),angular.forEach(t.copyPriceDetailList[i][o].freightItems,function(e,a){if(-1===e.price)t.copyPriceDetailList[i][o].freightItems[a].price="";else{var r=-1==e.price?0:e.price;1==t.urlData.adjustTypeId?1==t.urlData.adjustUnitId?r=parseFloat(r)+parseFloat(r*(t.urlData.adjustVal/100)):2==t.urlData.adjustUnitId&&(r=parseFloat(r)+parseFloat(t.urlData.adjustVal)):2==t.urlData.adjustTypeId&&(1==t.urlData.adjustUnitId?r=parseFloat(r)-parseFloat(r*(t.urlData.adjustVal/100)):2==t.urlData.adjustUnitId&&(r=parseFloat(r)-parseFloat(t.urlData.adjustVal))),r=r>=0?r:0,t.copyPriceDetailList[i][o].freightItems[a].price=parseFloat(r.toFixed(3))}}),r[o].id=""}t.savePriceDetailCache=[],$.extend(!0,t.savePriceDetailCache,t.copyPriceDetailList);for(var i=0,c=t.savePriceDetailCache.length;i<c;i++)for(var o=0,s=t.savePriceDetailCache[i].length;o<s;o++)t.savePriceDetailCache[i][o].id=null},t.childInit=function(){t.uid?(t.getInfo(),1==t.status?(t.isHidenEditBtn=!1,t.viewButton.submitDisabled=!1,t.viewButton.isShowCancelBtn=!0):t.isHidenEditBtn=!0):(t.parameter.data&&(t.urlData=JSON.parse(decodeURIComponent(t.parameter.data)),t.uid=t.urlData.uid,t.viewButton.isCopy=!0,t.infoCopy(),t.uid=0,2==t.urlData.priceType?t.viewButton.isSalesPrice=!0:(t.viewButton.isSalesPrice=!1,t.iInputServices=t.iInputServicesValue="")),t.title=Lang.getValByKey("priceDetail","priceDetail_code_addPriceMethod"))},t.childInit(),t.submitAudit=function(){$(document).promptBox({title:Lang.getValByKey("common","common_prompt_title"),type:"success",content:{tip:Lang.getValByKey("priceDetail","priceDetail_code_priceAddConfirm")},operation:[{type:"submit",description:Lang.getValByKey("common","common_pagination_confirm"),operationEvent:function(){$(document).promptBox("closePrompt");var e={urlParams:[t.uid]};i.audit(e,function(e){0===e.errorCode?($(document).promptBox({isDelay:!0,contentDelay:e.msg,type:"success"}),t.isHidenEditBtn=!0,t.viewButton.submitDisabled=!0,setTimeout(function(){t.goBack()},t.jumpTime)):$(document).promptBox({isDelay:!0,contentDelay:e.msg,type:"errer",manualClose:!0})})}}]})}}};